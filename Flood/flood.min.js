var numBlocks,numColors,blocks,totalClicks,gridSize=600,grid=$("#grid"),colors=["white","gray","black","red","orange","lime","navy","purple"],counterBox=$("#counter"),message=$("#message");function init(){numBlocks=parseInt($("#sizeSelect option:selected").val()),numColors=parseInt($("#colorSelect option:selected").val()),grid.width(gridSize),grid.height(gridSize),drawGrid()}function drawGrid(){message.hide();var o=gridSize/numBlocks;totalClicks=0,counterBox.text(totalClicks),blocks=[],grid.empty();for(var s=0;s<numBlocks;s++){blocks.push([]);for(var i=0;i<numBlocks;i++)blocks[s].push(new Block(s,i,o,randomColor()))}$(".block").click(function(){flood($(this).css("background-color"))})}function randomColor(){return colors[Math.floor(Math.random()*numColors)]}function flood(o){var s=blocks[0][0];s.color!=o&&(counterBox.text(++totalClicks),s.flood(o),checkWin(s)&&message.fadeIn())}function checkWin(o){for(var s=!0,i=0,t=o.color;i<numBlocks&&s;){for(c=0;c<numBlocks&&s;)s=t==blocks[i][c].color,c++;i++}return console.log(s),s}function Block(o,s,i,t){this.row=o,this.col=s,this.x=s*i,this.y=o*i,this.ider="[row="+this.row+"][col="+this.col+"]",this.size=i,this.neighbors=[],this.first=!0;var r="<div class='block' style='width:"+this.size+"px; height:"+this.size+"px; background-color:"+t+"; left:"+this.x+"px; top:"+this.y+"px;' row='"+o+"' col='"+s+"'></div>";grid.append(r),this.color=$(this.ider).css("background-color"),this.draw=function(o){var s=$(this.ider);s.css("background-color",o),this.color=s.css("background-color")},this.flood=function(o){var s=this.color;this.first&&(this.first=!1,this.getNeighbors()),this.draw(o);for(var i=0;i<this.neighbors.length;i++){var t=this.neighbors[i];t.color==s&&t.flood(o)}},this.getNeighbors=function(){var o=this.col+1;0<=o&&o<numBlocks&&this.neighbors.push(blocks[this.row][o]),0<=(o=this.col-1)&&o<numBlocks&&this.neighbors.push(blocks[this.row][o]),0<=(o=this.row+1)&&o<numBlocks&&this.neighbors.push(blocks[o][this.col]),0<=(o=this.row-1)&&o<numBlocks&&this.neighbors.push(blocks[o][this.col])}}init(),$("select").change(function(){numBlocks=parseInt($("#sizeSelect option:selected").val()),numColors=parseInt($("#colorSelect option:selected").val()),drawGrid()});